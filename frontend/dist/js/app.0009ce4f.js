(function(t){function e(e){for(var n,s,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},a={app:0},i=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[t.login?t._e():r("div",[r("h1",[t._v("Validando login!")]),r("b-spinner",{staticClass:"ml-auto",staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"success"}})],1),t.login?r("Container"):t._e()],1)},i=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("b-row",[r("b-col",[r("Nav",{attrs:{create:t.createorders}})],1)],1),r("b-row",[r("b-col",[r("b-card",{attrs:{"no-body":""}},[r("b-tabs",{attrs:{card:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[r("b-tab",{attrs:{title:"Cocina",active:""}},[r("b-row",[r("b-col",[r("Order",{attrs:{orders:t.order,listOrders:t.listOrders,updateTab:t.updateTab},on:{"update:orders":function(e){t.order=e}}})],1)],1)],1),r("b-tab",{attrs:{title:"Bodega"}},[r("Store")],1),r("b-tab",{attrs:{title:"Informes"}},[r("Reports")],1)],1)],1)],1)],1)],1)},o=[],c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Nav"},[r("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"success"}},[r("b-navbar-brand",{attrs:{href:"#"}},[t._v("Alegra Food")]),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-form",[r("b-input-group",{attrs:{prepend:"Nueva Orden"}},[r("b-form-input",{attrs:{type:"number",placeholder:"cantidad"},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),r("b-button",{attrs:{variant:"info"},on:{click:function(e){return t.create(t.quantity)}}},[t._v("Enviar")])],1)],1)],1)],1)],1)],1)},l=[],u={name:"Nav",data:function(){return{quantity:""}},props:{create:Function}},d=u,f=r("2877"),p=Object(f["a"])(d,c,l,!1,null,null,null),h=p.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Store"},[r("b-alert",{attrs:{variant:"danger",dismissible:"",show:t.error_buy}},[t._v("No se encontro disponibilidad de este producto en el mercado, por intentarlo de nuevo")]),r("b-alert",{attrs:{variant:"success",dismissible:"",show:t.success_buy}},[t._v("Se compro con exito!")]),t.loadBuy?r("b-spinner",{staticClass:"ml-auto",staticStyle:{width:"2rem",height:"2rem"},attrs:{variant:"info"}}):t._e(),r("b-button",{staticStyle:{float:"right"},attrs:{variant:"success"},on:{click:function(e){return t.listStore()}}},[r("b-icon",{attrs:{icon:"arrow-clockwise",scale:"1"}})],1),r("b-table",{attrs:{small:"",fields:t.fields,items:t.items,responsive:"sm"},scopedSlots:t._u([{key:"cell(buy)",fn:function(e){return[r("b-button",{staticClass:"btnsmall",attrs:{variant:"info"},on:{click:function(r){return t.buy_store(e)}}},[r("b-icon",{attrs:{icon:"shop","font-scale":"1"}})],1)]}},{key:"cell()",fn:function(e){return[t._v(" "+t._s(e.value)+" ")]}}])}),0==t.items.length?r("div",[r("h3",[t._v("Cargando Bodega...")]),r("b-spinner",{staticClass:"ml-auto",staticStyle:{width:"2rem",height:"2rem"},attrs:{variant:"success"}})],1):t._e()],1)},m=[],v=r("1da1"),_=(r("96cf"),r("bc3a")),g=r.n(_),y=r("7dc5"),w=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",g.a.post("".concat(y.store_url,"api/login"),{email:y.user,password:y.pass}).then((function(t){if(200==t.status)return localStorage.setItem("token",t.data.token),t;alert("Error Login!")})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r,n,a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i="store"==e?y.store_url:y.kitchen_url,t.abrupt("return",g()({method:n,url:i+r,data:a,headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(t){return t})).catch((function(t){return t})));case 2:case"end":return t.stop()}}),t)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),k={name:"Store",data:function(){return{fields:[{key:"name",label:"Ingrediente"},{key:"quantity",label:"Total"},{key:"buy",label:"Comprar"}],items:[],error_buy:!1,loadBuy:!1,success_buy:!1}},methods:{listStore:function(){var t=this;this.items=[],S("store","api/v1/store","GET",{}).then((function(e){t.items=e.data}))},buy_store:function(t){var e=this;this.loadBuy=!0,S("store","api/v1/store/".concat(t.item.id),"PUT",{buy:"true"}).then((function(t){200==t.status?(e.success_buy=!0,e.listStore()):e.error_buy=!0,e.loadBuy=!1}))}},mounted:function(){this.listStore()}},O=k,x=Object(f["a"])(O,b,m,!1,null,null,null),C=x.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Reports"},[r("b-container",[r("b-row",[r("b-col",[r("label",[t._v("Informe")]),r("b-form-select",{attrs:{id:"input-3",options:t.foods},model:{value:t.form.food,callback:function(e){t.$set(t.form,"food",e)},expression:"form.food"}})],1),r("b-col",[r("label",[t._v("Fecha")]),r("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"example-datepicker"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),r("b-col",[r("b-button",{staticClass:"btnsmall",attrs:{variant:"success"},on:{click:function(e){return t.queryReport()}}},[t._v(" Generar ")])],1)],1),r("b-row",[r("b-col",[r("b-table",{attrs:{striped:"",hover:"",items:t.items,fields:t.fields}})],1)],1),t.load?r("div",[r("h3",[t._v("Cargando...")]),r("b-spinner",{staticClass:"ml-auto",staticStyle:{width:"2rem",height:"2rem"},attrs:{variant:"success"}})],1):t._e()],1)],1)},j=[],q=(r("ac1f"),r("1276"),{name:"Reports",data:function(){return{load:!1,form:{date:(new Date).toISOString().split("T")[0],food:"kitchen",checked:[]},foods:[{text:"Historial de pedidos",value:"kitchen"},{text:"Historial de compras",value:"store"}],fields:[],items:[]}},methods:{queryReport:function(){var t=this;this.load=!0,this.fields,this.items=[],S(this.form.food,"api/v1/report?date=".concat(this.form.date),"GET",{}).then((function(e){t.load=!1,t.fields=e.data.fields,t.items=e.data.data}))}}}),E=q,F=Object(f["a"])(E,T,j,!1,null,null,null),P=F.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Order"},[r("b-alert",{attrs:{variant:"success",dismissible:"",show:t.success_finish}},[t._v("Se finalizo correctamente la orden")]),0==t.orders.length?r("div",[r("h3",[t._v("Cargando pedidos...")]),r("b-spinner",{staticClass:"ml-auto",staticStyle:{width:"2rem",height:"2rem"},attrs:{variant:"success"}})],1):t._e(),t._l(t.orders,(function(e,n){return r("b-card",{key:n,staticStyle:{"max-width":"20rem",height:"15rem"}},[r("div",{staticClass:"header"},[t._v(" Orden #"+t._s(n)+" ")]),r("b-card-text",[r("b-container",t._l(e,(function(e){return r("b-row",{key:e.order_recipes_id,staticClass:"mb-1"},[r("b-col",[t._v(t._s(e.name))]),r("b-col",{attrs:{lg:"3"}},["preparation"==e.status?r("b-button",{attrs:{variant:"success"},on:{click:function(r){return t.loadIngredient(e)}}},[r("b-icon",{attrs:{icon:"arrow-right-circle-fill","font-scale":"1"}})],1):t._e(),"finish"==e.status?r("b-icon",{attrs:{icon:"check-circle-fill",variant:"success","font-scale":"1"}}):t._e()],1)],1)})),1)],1),t.loadingFinish?t._e():r("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.finish_order(n)}}},[t._v("Terminar Orden")])],1)})),r("b-modal",{attrs:{"hide-footer":""},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[r("Recipe",{attrs:{items:t.item,title:t.title,recipe:t.recipeSelect,updateStatus:t.updateStatus,steps:t.steps}})],1)],2)},$=[],B=(r("99af"),r("b0c0"),r("4de4"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Recipe"},[r("b-card",{attrs:{header:t.title,"header-bg-variant":"success","header-text-variant":"white",align:"center",title:"Ingredientes"}},[r("b-card-text",[r("b-container",[r("b-row",{staticClass:"mb-1 headerTable"},[r("b-col",[t._v("Producto")]),r("b-col",[t._v("Cant")]),r("b-col",[t._v("Bodega")])],1),t._l(t.items,(function(e,n){return r("b-row",{key:n,staticClass:"mb-1 "},[r("b-col",[t._v(t._s(e.name))]),r("b-col",[t._v(t._s(e.quantity_recipe))]),r("b-col",[e.quantity>0?r("div",[t._v(" "+t._s(e.quantity)+" ")]):e.quantity<1?r("div",[r("small",[t._v("Agotado ")]),r("b-button",{staticClass:"btnsmall",attrs:{variant:"info"},on:{click:function(e){return t.steps(1)}}},[t._v(" comprar ")])],1):t._e()])],1)}))],2)],1),0==Object.keys(t.items).length||t.loadingFinish?r("div",[r("b-spinner",{staticClass:"ml-auto",staticStyle:{width:"2rem",height:"2rem"},attrs:{variant:"success"}})],1):t._e(),t.loadingFinish?t._e():r("b-button",{attrs:{size:"lg",variant:"success"},on:{click:function(e){return t.finish_recipe()}}},[t._v("Terminar Plato")])],1)],1)}),I=[],N=(r("159b"),{name:"Recipe",props:{items:Object,recipe:Object,title:String,updateStatus:Function,steps:Function},data:function(){return{loadingFinish:!1}},methods:{validate_finish:function(){var t=this.items.filter((function(t){return t.quantity_recipe>t.quantity}));return!(t.length>0)},finish_recipe:function(){var t=this;this.validate_finish()?(this.loadingFinish=!0,this.items.forEach((function(t){S("store","api/v1/store/".concat(t.id),"PUT",{quantity:t.quantity_recipe})})),S("kitchen","api/v1/order/recipe/".concat(this.recipe.order_recipes_id),"PUT",{status:"finish"}).then((function(){t.loadingFinish=!1,t.updateStatus()}))):alert("No tiene la cantidad suficiente en bodega para terminar este plato")}}}),z=N,A=(r("e2ba"),Object(f["a"])(z,B,I,!1,null,"59a80112",null)),G=A.exports,M={name:"Order",components:{Recipe:G},props:{orders:Array,updateTab:Function,listOrders:Function},data:function(){return{modalShow:!1,item:{},title:"",recipeSelect:{},success_finish:!1,loadingFinish:!1}},methods:{loadIngredient:function(t){var e=this;this.title="orden #".concat(t.id," ").concat(t.name),this.recipeSelect=t,this.modalShow=!0,this.item={},S("store","api/v1/store?recipe=".concat(t.id_recipe),"GET",{}).then((function(t){e.item=t.data}))},updateStatus:function(){this.modalShow=!1,this.orders=[],this.listOrders()},validate_order:function(t){var e=this.orders[t].filter((function(t){return"preparation"==t.status}));return!(e.length>0)},steps:function(t){this.modalShow=!1,this.listStore(),this.updateTab(t)},finish_order:function(t){var e=this;this.validate_order(t)?(this.success_finish=!0,this.orders=[],S("kitchen","api/v1/order/".concat(t),"PUT",{status:"finish"}).then((function(){e.listOrders()}))):alert("Debe terminar todos los platos de la orden")}}},U=M,J=(r("a514"),Object(f["a"])(U,R,$,!1,null,"7940480e",null)),D=J.exports,H={name:"Container",components:{Nav:h,Reports:P,Store:C,Order:D},data:function(){return{order:[],step:0}},methods:{createorders:function(t){var e=this;this.order=[],S("kitchen","api/v1/order","POST",{quantity:t}).then((function(t){console.log(t),e.listOrders()}))},listOrders:function(){var t=this;S("kitchen","api/v1/order","GET",{}).then((function(e){t.order=e.data}))},updateTab:function(t){this.step=t}},mounted:function(){this.listOrders()}},L=H,V=Object(f["a"])(L,s,o,!1,null,null,null),K=V.exports,Q={name:"App",components:{Container:K},data:function(){return{login:!1}},mounted:function(){var t=this;w().then((function(){t.login=!0}))}},W=Q,X=(r("034f"),Object(f["a"])(W,a,i,!1,null,null,null)),Y=X.exports,Z=r("5f5b"),tt=r("b1e0");r("f9e3"),r("2dd8");n["default"].use(Z["a"]),n["default"].use(tt["a"]),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(Y)}}).$mount("#app")},"7dc5":function(t){t.exports=JSON.parse('{"store_url":"http://127.0.0.1:8888/","kitchen_url":"http://127.0.0.1:8200/","user":"libardo.zuniga@gmail.com","pass":"123"}')},"85ec":function(t,e,r){},"87a1":function(t,e,r){},a514:function(t,e,r){"use strict";r("87a1")},e2ba:function(t,e,r){"use strict";r("ea4e")},ea4e:function(t,e,r){}});
//# sourceMappingURL=app.0009ce4f.js.map